<!DOCTYPE html> <!-- Dokumenttypdeklaration für HTML5 -->
<html lang="de"> <!-- Beginn des HTML-Dokuments mit deutscher Spracheinstellung -->
<head>
  <meta charset="UTF-8"> <!-- Zeichencodierung auf UTF-8 setzen -->
  <title>Substantive aus Sätzen extrahieren</title> <!-- Seitentitel im Browser-Tab -->

  <style>
    /* CSS für das Popup-Fenster */
    .popup {
      display: none; /* zunächst unsichtbar */
      position: fixed; /* feste Position relativ zum Viewport */
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%); /* zentrieren */
      background: white;
      border: 1px solid #ccc;
      padding: 20px;
      z-index: 1000;
      box-shadow: 0 0 10px rgba(0,0,0,0.3); /* Schatteneffekt */
    }

    /* CSS für den überlagernden Hintergrund */
    .overlay {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.5); /* halbtransparenter dunkler Hintergrund */
      z-index: 999;
    }

    /* Link-Stil für das Öffnen des Popups */
    #open-link {
      cursor: pointer;
      color: blue;
      text-decoration: underline;
    }

    /* Stil für Textfelder */
    textarea {
      width: 100%;
      height: 60px;
      margin-top: 5px;
      margin-bottom: 10px;
    }

    /* Stil für Buttons */
    button {
      margin-top: 10px;
    }
  </style>
</head>

<body>
  <p><span id="open-link">Open window</span></p> <!-- Auslösender Link zum Öffnen des Eingabe-Popups -->

  <div class="overlay" id="overlay"></div> <!-- Hintergrund-Overlay -->

  <!-- Erstes Popup mit Eingabefeldern -->
  <div class="popup" id="popup1">
    <label>Info:</label>
    <textarea id="input1"></textarea>
    <label>Task:</label>
    <textarea id="input2"></textarea>
    <label>Profil 3:</label>
    <textarea id="input3"></textarea>
    <button onclick="sendText()">Send</button> <!-- Button zum Verarbeiten der Eingaben -->
  </div>

  <!-- Zweites Popup zur Anzeige der Ergebnisse -->
  <div class="popup" id="popup2">
    <p id="display-text"></p> <!-- Ausgabe der Substantive -->
    <button onclick="closePopup2()">Schließen</button> <!-- Schließen-Button -->
  </div>

  <script>
    // Referenzen auf HTML-Elemente
    const openLink = document.getElementById('open-link');
    const popup1 = document.getElementById('popup1');
    const popup2 = document.getElementById('popup2');
    const overlay = document.getElementById('overlay');
    const input1 = document.getElementById('input1');
    const input2 = document.getElementById('input2');
    const input3 = document.getElementById('input3');
    const displayText = document.getElementById('display-text');

    // Öffnet das erste Popup-Fenster bei Klick
    openLink.addEventListener('click', () => {
      overlay.style.display = 'block';
      popup1.style.display = 'block';
    });

    // Funktion zum Verarbeiten der Eingabetexte
    function sendText() {
      const text1 = input1.value.trim(); // Eingabe 1
      const text2 = input2.value.trim(); // Eingabe 2
      const text3 = input3.value.trim(); // Eingabe 3

      if (!text1 || !text2 || !text3) { // Prüfung auf leere Felder
        alert("Bitte alle drei Textfelder ausfüllen.");
        return;
      }

      const allText = text1 + " " + text2 + " " + text3; // Alle Texte zusammenfassen
      const substantivListe = extractSubstantives(allText); // Substantive extrahieren

      // Ausgabe formatieren je nach Ergebnis
      const output = substantivListe.length > 0
        ? `<strong style="color: blue;">${substantivListe.join(', ')}</strong>`
        : `<em>Keine Substantive erkannt.</em>`;

      displayText.innerHTML = output; // Ausgabe anzeigen

      popup1.style.display = 'none'; // Eingabepopup schließen
      popup2.style.display = 'block'; // Ergebnispopup öffnen
    }

    // Funktion zum Schließen des Ergebnis-Popups und Leeren der Felder
    function closePopup2() {
      popup2.style.display = 'none';
      overlay.style.display = 'none';
      input1.value = '';
      input2.value = '';
      input3.value = '';
    }

    // Funktion zur Erkennung von Substantiven im Text
    function extractSubstantives(text) {
      const knownSubstantives = [ // vordefinierte Liste an bekannten Substantiven
        "lauf", "laufen", "wald", "sonne", "kind", "spiel", "programmieren", "spaß", "arbeit", "auto", "hund", "katze",
        "buch", "straße", "liebe", "schule", "haus", "musik", "sport", "tag", "nacht", "licht"
      ];

      const words = text.toLowerCase().split(/[\s.,!?;:()]+/); // Text in Wörter aufteilen
      const substSet = new Set(); // Set für eindeutige Substantive

      for (let word of words) {
        if (!word) continue;
        if (knownSubstantives.includes(word)) {
          // bekannte Wörter als Neutrum "das ..."
          substSet.add("das " + word.charAt(0).toUpperCase() + word.slice(1));
        } else if (word.endsWith("en")) {
          // einfache Regel: Wörter mit „-en“ als Neutrum
          substSet.add("das " + word.charAt(0).toUpperCase() + word.slice(1));
        } else if (word.endsWith("keit") || word.endsWith("heit") || word.endsWith("ung")) {
          // Regel für feminines Genus bei bestimmten Endungen
          substSet.add("die " + word.charAt(0).toUpperCase() + word.slice(1));
        }
      }

      return Array.from(substSet); // Rückgabe als Array
    }
  </script>
</body>
</html>
